pipeline {

	agent any

	stages {

		stage("build") {

			steps {
				echo 'build stage'
				echo "Current build ID is: ${env.BUILD_ID}"
				echo "Current build number is: ${env.BUILD_NUMBER}"
		

			}

		}

		stage("test") {
			
			when {
                                expression {
                                        BRANCH_NAME == 'dev' || BRANCH_NAME == 'master'
                                }
                        }
                        steps {
				echo "BRANCH name is ${env.BRANCH_NAME}"
				echo "test stage - only execute this if 'dev' branch or 'master' branch"
                        }

                }

		stage("deploy") {

                        steps {
				echo 'deploy stage'
                        }

                }

	}

}
